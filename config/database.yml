# Bros Nuzlocke Tracker Database Configuration ğŸ—„ï¸
# é–‹ç™ºç’°å¢ƒã§ã¯SQLiteã€æœ¬ç•ªç’°å¢ƒã§ã¯PostgreSQLï¼ˆSupabaseï¼‰

# é–‹ç™ºç’°å¢ƒï¼šSQLiteï¼ˆãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç”¨ï¼‰
development:
  adapter: sqlite3
  database: storage/development.sqlite3
  pool: <%= ENV.fetch("RAILS_MAX_THREADS") { 5 } %>
  timeout: 5000

# ãƒ†ã‚¹ãƒˆç’°å¢ƒï¼šSQLiteï¼ˆãƒ†ã‚¹ãƒˆç”¨ï¼‰
test:
  adapter: sqlite3
  database: storage/test.sqlite3
  pool: <%= ENV.fetch("RAILS_MAX_THREADS") { 5 } %>
  timeout: 5000

# æœ¬ç•ªç’°å¢ƒï¼šPostgreSQLï¼ˆSupabase/Renderï¼‰
production:
  adapter: postgresql
  encoding: unicode
  pool: <%= ENV.fetch("RAILS_MAX_THREADS") { 5 } %>
  
  # Supabaseç”¨ã®DATABASE_URLè¨­å®š
  <% if ENV["DATABASE_URL"].present? %>
  url: <%= ENV["DATABASE_URL"] %>
  <% else %>
  # ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯è¨­å®šï¼ˆé–‹ç™ºãƒ»ãƒ†ã‚¹ãƒˆç”¨ï¼‰
  host: <%= ENV["DATABASE_HOST"] || "localhost" %>
  port: <%= ENV["DATABASE_PORT"] || 5432 %>
  database: <%= ENV["DATABASE_NAME"] || "bros_nuzlocke_tracker_production" %>
  username: <%= ENV["DATABASE_USER"] || "postgres" %>
  password: <%= ENV["DATABASE_PASSWORD"] || "" %>
  <% end %>
  
  # Supabaseæœ€é©åŒ–è¨­å®š
  connect_timeout: 10
  read_timeout: 10
  write_timeout: 10
  checkout_timeout: 5
  variables:
    statement_timeout: 30s
    lock_timeout: 10s
  connect_timeout: 30
  read_timeout: 30
  write_timeout: 30
  # SSLå¿…é ˆï¼ˆSupabaseè¦ä»¶ï¼‰
  sslmode: require
  # IPv4å¼·åˆ¶ï¼ˆRender IPv6éå¯¾å¿œå¯¾ç­–ï¼‰
  hostaddr: <%= ENV["DATABASE_HOSTADDR"] if ENV["DATABASE_HOSTADDR"].present? %>
  # PostgreSQL IPv4å„ªå…ˆè¨­å®š
  application_name: "bros-nuzlocke-tracker"
