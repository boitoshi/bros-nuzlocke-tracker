# ポケモン ナズロック（Nuzlocke）トラッカー 要件定義書

## プロジェクト概要

ポケモンのナズロックチャレンジをサポートするWebアプリケーション。
プレイヤーがナズロックルールに従ってゲームを進行する際の記録・管理を支援する。

## 基本ルール（ナズロック）

1. **1匹ずつのみ捕獲**: 各エリア・ルートで最初に出会ったポケモンのみ捕獲可能
2. **愛称必須**: 捕獲したポケモンには必ず愛称をつける（愛着を持つため）
3. **ひんし=リリース**: HPが0になったポケモンは「死亡」とみなし、リリースまたはボックス封印

## 主要機能

### 1. ユーザー管理
- [ ] ユーザー登録・ログイン（Devise使用）
- [ ] プロフィール設定（トレーナー名、好きなポケモンなど）

### 2. プレイ記録管理
- [ ] **新規チャレンジ作成**
  - ゲームタイトル選択（赤・緑・青・ピカチュウ・金・銀・クリスタルなど）
  - チャレンジ名設定
  - 開始日記録
- [ ] **チャレンジ一覧表示**
  - 進行中/完了/失敗 の状態管理
  - 各チャレンジの進捗状況表示

### 3. ポケモン管理
- [ ] **捕獲記録**
  - 捕獲場所（ルート、ジム、洞窟など）
  - 捕獲レベル
  - 性格・特性
  - 愛称入力
  - 捕獲日時
- [ ] **パーティ管理**
  - 手持ちポケモン表示（最大6匹）
  - レベル・HP・技構成管理
  - 進化記録
- [ ] **状態管理**
  - 生存/死亡/ボックス保管
  - 死亡時のエピソード記録

### 4. エリア・ルート管理
- [ ] **ゲーム別エリア一覧**
  - ルート1〜25、各ジム、洞窟など
  - エリアごとの捕獲状況（未遭遇/捕獲済み/死亡）
- [ ] **捕獲チェック機能**
  - エリアでの初回捕獲済みかチェック
  - 捕獲可能エリア表示

### 5. 進行記録
- [ ] **ジム戦記録**
  - ジムリーダー攻略状況
  - 使用パーティ記録
  - 戦闘結果（勝利/敗北）
- [ ] **重要イベント記録**
  - 四天王挑戦
  - チャンピオン戦
  - 伝説ポケモン遭遇

### 6. 統計・分析
- [ ] **チャレンジ統計**
  - 総捕獲数
  - 生存率
  - 平均レベル
  - よく死ぬタイプ分析
- [ ] **記録比較**
  - 過去のチャレンジとの比較
  - 他ユーザーとの比較（匿名）

### 7. 思い出・エピソード
- [ ] **日記機能**
  - プレイ日記投稿
  - 重要な出来事記録
  - 画像添付対応
- [ ] **追悼機能**
  - 死亡したポケモンの思い出記録
  - 死因・エピソード記録

### 8. ストーリーガイド機能 🆕
- [ ] **攻略ガイド表示**
  - ゲーム別の詳細な攻略情報
  - 各ジムリーダーの手持ち・戦略情報
  - おすすめレベル・パーティ構成
  - 重要アイテム入手場所
- [ ] **進行状況連動**
  - 現在の進行度に応じたガイド表示
  - 次の目標・やるべきことの提示
  - 危険エリアの事前警告
- [ ] **ルート別情報**
  - 各ルートで出現するポケモン一覧
  - 捕獲推奨ポケモンとその理由
  - トレーナー戦情報・注意点
- [ ] **戦略アドバイス**
  - タイプ相性を考慮した編成提案
  - レベル上げ効率的な場所
  - 技マシン・進化石の効果的な使い方

### 9. 難易度調整機能 🆕
- [ ] **カスタムルール設定**
  - 基本ナズロックルールのON/OFF
  - セットレベル制限（ジムリーダーのレベル+5まで等）
  - アイテム使用制限（回復アイテム、戦闘中アイテム等）
  - ポケセン使用制限
- [ ] **難易度プリセット**
  - **イージー**: アイテム制限なし、レベル制限緩和
  - **ノーマル**: 標準的なナズロックルール
  - **ハード**: アイテム制限あり、セットレベル制限
  - **ハードコア**: 極限の制限（ポケセン1回のみ、アイテム禁止等）
  - **カスタム**: ユーザー独自のルール設定
- [ ] **追加チャレンジ**
  - **モノタイプ**: 特定タイプのポケモンのみ使用
  - **ワンダーロッケ**: ランダムで交換されたポケモンのみ
  - **ソウルリンク**: 複数人で連携してプレイ
  - **エッグロッケ**: 卵から生まれたポケモンのみ
- [ ] **制限管理**
  - 設定した制限の自動チェック機能
  - ルール違反時の警告表示
  - 制限履歴の記録・統計

## 技術仕様

### フレームワーク・ライブラリ
- **Ruby on Rails 8.0.2**
- **Ruby 3.3.4**
- **PostgreSQL** (データベース)
- **Bootstrap 5.2** (UI)
- **Devise** (認証)
- **Stimulus** (JavaScript)

### データベース設計（予定）
- Users（ユーザー）
- Challenges（チャレンジ）
- Pokemon（ポケモン）
- Areas（エリア・ルート）
- Captures（捕獲記録）
- Gym_Battles（ジム戦）
- Diary_Entries（日記）
- Story_Guides（ストーリーガイド）🆕
- Challenge_Rules（チャレンジルール）🆕
- Rule_Violations（ルール違反記録）🆕

## UI/UX 要件

### デザイン方針
- **親しみやすく温かみのあるデザイン**
- **ポケモンの世界観を大切に**
- **スマートフォン対応必須**

### カラーパレット
- プライマリ: ポケモンらしい明るい青
- セカンダリ: 温かみのある黄色
- アクセント: 各ポケモンタイプカラー活用

### レスポンシブ対応
- デスクトップ、タブレット、スマートフォン
- 外出先でのプレイ記録を想定

## セキュリティ要件
- [ ] ユーザーデータの適切な保護
- [ ] CSRF対策
- [ ] SQL インジェクション対策
- [ ] XSS対策

## パフォーマンス要件
- [ ] ページ読み込み時間: 3秒以内
- [ ] データベースクエリ最適化
- [ ] 画像圧縮・CDN活用

## 今後の拡張予定

### フェーズ2（将来実装）
- [ ] **ソーシャル機能**
  - 他ユーザーのチャレンジ閲覧
  - いいね・コメント機能
  - ランキング機能

- [ ] **高度な分析**
  - AI による戦略提案
  - 統計データ可視化
  - 成功パターン分析

- [ ] **モバイルアプリ**
  - iOS/Android ネイティブアプリ
  - プッシュ通知機能

### フェーズ3（長期構想）
- [ ] **ゲーム連携**
  - セーブデータ読み込み
  - 自動記録機能

- [ ] **コミュニティ機能**
  - フォーラム・掲示板
  - チャレンジ企画・イベント

## 成功指標（KPI）
- ユーザー登録数: 100人（3ヶ月以内）
- アクティブユーザー率: 60%以上
- チャレンジ完走率: 30%以上
- ユーザー満足度: 4.0/5.0以上

---

## 開発メモ

### 優先度
1. **HIGH**: ユーザー管理、基本的なポケモン記録機能
2. **MEDIUM**: ストーリーガイド機能、難易度調整機能、統計機能、UI改善
3. **LOW**: ソーシャル機能、高度な分析

### 注意点
- ポケモンは著作物のため、公式画像の使用は避ける
- ユーザーの思い出を大切にする設計
- 使いやすさを最優先に
- ガイド機能は押し付けがましくならないよう配慮
- 様々な難易度に対応し、初心者から上級者まで楽しめる設計

### 新機能のメリット
#### ストーリーガイド機能
- 初心者プレイヤーの敷居を下げる
- ナズロック特有の注意点を事前に知ることができる
- 戦略的なプレイをサポート
- nuzlocke.appのような人気サイトの良い部分を取り入れ

#### 難易度調整機能
- 幅広いプレイヤー層に対応
- リプレイ価値の向上
- 自分のスキルに合わせた挑戦が可能
- コミュニティでの様々なチャレンジ企画に対応

---

*このドキュメントは開発の進行に合わせて随時更新されます。*
*追加したい機能や改善案があれば、ぜひお聞かせください！* 🎮✨
